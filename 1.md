Webhook
给 GitHub API 发送一个 repository dispatch event(仓库调度事件) 请求，当 API 接收到请求后就会触发相应的 work­flow 。Web­hook 方式灵活多变，可控性强，对于高阶用户来说是一个利器，甚至可以自己写一个触发脚本、网页或者浏览器插件来实现更高级的功能。

创建 token
首先需要创建 Personal access token，权限为 repo 即可。如果你不知道怎么做，可以查看官方文档中的相关介绍。to­ken 会用在 web­hook 的请求标头中，用于身份验证。

编写 Workflow 文件
在 work­flow 文件中设置 repository_dispatch 触发事件，以便 GitHub Ac­tions 能接收这个触发事件，这是一个最简单的 Work­flow 文件示例：

on: repository_dispatch

jobs:
  run:
    runs-on: ubuntu-latest

    steps:
    - name: Hello World
      run: |
        echo My name is P3TERX.
        echo Hello World!
发送请求
通过 web­hook 来触发 GitHub Ac­tions，以下是一个使用 cURL 发送请求的例子：

curl -X POST https://api.github.com/repos/:owner/:repo/dispatches \
    -H "Accept: application/vnd.github.everest-preview+json" \
    -H "Authorization: token ACTIONS_TRIGGER_TOKEN" \
    --data '{"event_type": "TRIGGER_KEYWORDS"}'
需要要替换的值：

:owner - 用户名
:repo - 需要触发的 Github Action 所在的仓库名称
ACTIONS_TRIGGER_TOKEN - 带有 repo 权限的 Personal access token
TRIGGER_KEYWORDS - 自定义 Webhook 事件名称，可以为任意值，Actions 列表中会显示此名称，更多信息请参见下文。
进阶使用
在 web­hook 请求中需要发送一个 event_type 属性的 json 有效负载，前面例子中的 TRIGGER_KEYWORDS 就是所发送的有效负载，官方将它称之为 “自定义 Web­hook 事件名称”，为了方便理解下文将它称之为 “触发关键词”。因为没有做任何限制设置，所以可以为任意值，这是最基础的使用方式。有时一个仓库可能不止一个 work­flow ，所以我们就可能需要对触发关键词进行限制，使用不同的关键词来触发不同的 work­flow 。

设置 repository_dispatch 下的 types 字段的值可以限制触发关键词，下面的例子将设置 helloworld 这个触发关键词，只有当请求中的关键词为 helloworld 才会触发。

on:
  repository_dispatch:
    types: helloworld
还可以给每一个步骤设置运行条件，在运行条件中 github.event.action 等于触发关键词，通过判断给定的值是否与 github.event.action 相同来判断该步骤是否需要执行。比如下面例子中只有当触发关键词为 helloworld 时才会执行这个步骤。

steps:
- name: Hello World
  if: github.event.action == 'helloworld'
  run: |
    echo My name is P3TERX.
    echo Hello World!
通过判断 github.event.action 是否包含给定的值来判断该步骤是否需要执行。比如下面例子中当关键词包含 hello 这个步骤就会执行。

steps:
- name: Hello World
  if: contains(github.event.action, 'hello')
  run: |
    echo My name is P3TERX.
    echo Hello World!
触发关键词也可以是多个，比如像下面这个例子。当触发关键词为 helloworld 时，只有 Hello World 步骤会运行；当触发关键词为 test 时，只有 TEST 步骤会运行；当触发关键词为 none 时，虽然 Ac­tions 会触发，但没有步骤运行。而发送其他关键词并不会触发这个 work­flow 。

name: Webhook Test

on:
  repository_dispatch:
    types: [helloworld, test, none]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Hello World
      if: contains(github.event.action, 'hello')
      run: |
        echo My name is P3TERX.
        echo Hello World!

    - name: TEST
      if: github.event.action == 'test'
      run: |
        echo test
甚至还可以在一个 work­flow 完成后调用另一个 work­flow ，只需要在 work­flow 结尾加入相应的请求指令即可。具体就不做赘述了，相信看到这里的小伙伴都应该已经了解该如何去做了。
